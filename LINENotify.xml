<?xml version="1.0" encoding="UTF-8"?>
<service-task-definition>
	<label>Post message through LINE Notify</label>
	<label locale="ja">LINE Notifyでメッセージ投稿</label>
	<summary>Post message to your LINE Group through LINE Notify. In advance you have to get a personal access token. When get the one, choose where messages are sent. </summary>
	<summary locale="ja">LINE Notifyを通してLINEグループにメッセージを投稿します。事前にパーソナルアクセストークンを取得してください。送信先はトークンを取得するユーザー本人、またはその人の参加しているグループの中からトークン取得時に選択します。</summary>
	<configs>
		<config name="token" form-type="TEXTFIELD" required="true">
		<label>C1.access token(choose the destination when you get the token)</label>
		<label locale="ja">C1.アクセストークン(メッセージは取得時に指定したグループまたは個人へ送信されます)</label>
		</config>
		<config name="Message" form-type="SELECT" select-data-type="STRING" required="true">
		<label>I1.Text Message(Data type:String, Within 1000 characters)</label>
		<label locale="ja">I1.テキスト(指定:文字型データ、1000文字まで)</label>
		</config>
	</configs>
	<script><![CDATA[
main();
	
function main(){
	var token = configs.get("token");
	var message = engine.findDataByNumber(configs.get("Message"));
	//send message to LINE Notify API
	var response = httpClient.begin()
		.bearer(token)
		.multipart("message", message)
		.post('https://notify-api.line.me/api/notify');
	var responseText = response.getResponseAsString();
	var json = JSON.parse(responseText);
	//check whether sending succeeded
	if (response.getStatusCode() != 200) {
		throw new Error(responseText) ;
	}else{
		engine.log(responseText)
	}
}

]]>
</script>
<icon>iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD5UlEQVRYR8WXXWgUVxTHf7NpNgnI
ZhOjqYKkbYJiaOpGUZQkdAnG1ge/oJIYwW4oZVZRbN78QNqI+GhWhGzXl+hLCEGaCCm0kGpKWh8i
ajToPpiqCC1pLWVXYoP5mnJn3Mlkd742FT2w7LL3nPP/3zv/c+4ZibdsUlb4MXYDH6MQQMIPBF7F
j6CQQEJ8DxLmqtu8zgQ68TPFUeArUEHdWAKI4OU8LYjflmZPIEoID+1ZAKcDCfAWZPqsGFgT+JYI
krrz12ERZFrNEpkTiHEJ+Px1IOs5FC4RpiU9ZyYBlztfnr+c1o9aKS0oZez5GGfvnHXmq3CesKol
3RYS0J55p1Om/k/7qV9ZT8E7BbprcipJ92/dhIfCTuF7jJqYJ6Cp/bGT4Ib3DLNx2UZTEAWF7rFu
mq8125FI4OX9VHXME4jxDfC1XWRkS4SjVfa6nJ6bpnGgkd4nvXap2pBVPIwERMkU2kU9bHpIha/C
6YgZ+H2Ahu8b7E9BpmiegNbhMiivL1lPR20H5b5ycqQcluQuIdeT60ggnohT2VPp5KdqQTsBE+UH
VwTp/aQXv9dt85vHm5mbITGV4MafN9j14y5zIq8qQiMQY1Dt8Qa799k9qoqrnHbhuH79j+vU99eb
+f2MTDBF4AlQZvSa/GKS/Jx8UwCR9GL8Ij6vT1/ve9xHvDFOcV7xghghys19m7n99+30XCPIVKcI
KOmrs1/O4pE8pgS6xrrYvmo7RXmqjpicmeTc6DlOVp809T918xRn7pzJXJORLAk8O/CMkvwS04Sn
b53mePVxXZBid0Kk65auM/Xf99M+tUllmIFAxiOI1kYJV5p3tYNDB4nWRfV8YofbVm3Dl+tjbdFa
vB6vvvZ04illXQuerramcJcwAUsRCp+erT3sKNuxQAsvZ1/SPtrOscAxNY9Q/IPEA4b/GqbQW8je
D/bq4OP/jnPol0NWTckgQpsLqKa0htCakJpc2MT0hHoHNJU36UAvZl6w84ed6n/+PD9zyhyPnj/i
xM0T1lWSVoamjcgqurmimU3LNnHkwyNIkkTH/Q4O/3rYsSTTHAyNSKzE1NHJthUbE4RWh+gMdqrl
teG7DdmCJ5G18S6ry8iIcqHmAvsr9lN7tVbVQJZmchlp17GoBlencKXhCqP/jNJ2qy1LbJJ4eS/z
OhZpXA4kwrXu3TqGxoeyBRf+FgNJKpXLkWwxyIB+9Kn4NzeUwmVkQunE39RYnrFz+xNIrWqDihjR
XQnT5LEkgdDiXkxS2bTqEKO0+LglIoDFq1nk/72apW9JnIhCEIkACn4ktOtPXCwSCRRGkBi027F7
DSxS5tmG/QcaDzIwlJdTxAAAAABJRU5ErkJggg==</icon>
</service-task-definition>