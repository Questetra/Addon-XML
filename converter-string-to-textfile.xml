<?xml version="1.0" encoding="UTF-8"?><service-task-definition>

<label>Converter(Create Text File)</label>
<label locale="ja">コンバータ（テキストファイル作成）</label>

<help-page-url>https://support.questetra.com/addons/converter-textfile-to-string/</help-page-url>
<help-page-url locale="ja">https://support.questetra.com/ja/addons/converter-textfile-to-string/</help-page-url>

<summary>Stores the values in a Any text type data item into a File type data item as a Text. It does not affect existing files. Just add. </summary> 
<summary locale="ja">任意のテキストを、ファイルデータ項目に格納します。ファイルは追加され、既存のファイルには影響を与えません。</summary>
    
<license>(C) Questetra, Inc. (MIT License)</license>
<last-modified>2019-11-25</last-modified>

<configs>
    <config name="File_DataId" required="true" form-type="SELECT" select-data-type="FILE">
    <label>A: File type data item to save text </label>
    <label locale="ja">A: テキストを保存するファイル型データ項目 </label>
   </config>
   <config name="File_Name" form-type="TEXTFIELD" required="true" el-enabled="true">
    <label>B: Saving file name</label>
    <label locale="ja">B: 保存ファイル名</label>
   </config>
   <config name="Text_Data" required="true" form-type="TEXTAREA" el-enabled="true">
    <label>C: Contents of text file</label>
    <label locale="ja">C: テキストファイルの内容</label>
   </config>
   
</configs>

<engine-type>1</engine-type>

<script><![CDATA[

//////// START "main()" ////////
main();
function main(){ 

//// == Config Retrieving / 工程コンフィグの参照 ==
let textdata = configs.get( "Text_Data" );
let filename = configs.get( "File_Name" );
let filedataId = configs.get( "File_DataId" );


if(filename === "" ||filename === null) {
    throw new Error( "File Name is blank" );
  }



//// == Data Retrieving / ワークフローデータの参照 ==
//let myText = engine.findDataByNumber( textdataId ); 
let myFiles  = engine.findDataByNumber( filedataId );// java.util.ArrayList
if( myFiles === null ){ myFiles = new java.util.ArrayList(); }


//var myString = "";//

if(textdata === "" ||textdata === null) {
textdata = "";
}


myFiles.add(
  new com.questetra.bpms.core.event.scripttask.NewQfile(
    filename,
    "text/tab-separated-values; charset=UTF-8",
    textdata
  )
);




//// == Data Updating / ワークフローデータへの代入 ==
engine.setDataByNumber( filedataId, myFiles );


} //////// END "main()" ////////

]]></script>


<icon>
iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACx0lEQVRYR8WXz0sUYRjHP5O0CLX+
uHTIQ7sHIby0BdIh0EU6hwmd20Vx9mb9AUvlQQSRVhBq0WW3gxcFKzx4000kBKO2QNgSssgS6uDu
oQQJJt4ZZ3ecH+s4O+kLyy7s+z7fz/PM87zPMxKnvKRj6afpBbpRiCDRAkQOzhdQKCEhvvMkeOnW
7tEAWVrYZwi4B6qom1UCUgSYII747bhqAzwhxhkeH0PYLCTE48i8cCJwBnhKCkn13I+VQua+nSF7
gDQ54K4fyhUbCjkSxM02rQD+en5YT2GChJpLlXUYQHvmWV89txq7bcyJKoCW7Vt1JJxb7hIBwnp1
VAHSPAQeuLVSa99U1xTzW/Msflt02vYIWdXDCCBKptkPgI07GzQFmhhcGXSCKCHTWgXQbrjnRvGe
iz20nWvzxJO8lqS9uZ3t39u1INRc0CJgk/nCi47WDk8AxkOOEAcVoQGkyat3vGH5BbD3d4/RwijD
b4fNzrxCJqoDfAEuGXdMd03TeaHTUwRC50NqDgjx8Q/jJN8k7ewUkLmqAyielBwOieiFg+Fa4tpJ
GelIgODZIJnuDDt/dhh67a41rN5aZfnHspPnVWwDgOURiF1CPBvN0hvqJfcxx8DKgH+BUnhPgohj
EhrFG6QG1n6usVne9ASw9H2J3CfR3w4tQxLalOHszVn6wn0I8XpXppixRs9UhpaLaPLGJP2X+2ls
aKxXH1sAMFxE2l1guYqNEHOf51j4uuAJplgqsv5r3Xi2jKyNd0c2Ix1iZnPGzyS0aUZaOxbVYGlI
Y9fH2N3fZeTdiKcImA6VCRCytmOx61QHEh3zf45kUAm9LndyQyk8QyZmfoYnNZZbPK8dAf1fbVAR
V5jXSakMxLy9mOgQWnWIUVp83IIIYfFqlqrv1cz8wEREFKJIRFBoQeKKukU0FokSCgUk8rU8dp8D
flS8Cxv/AFp57iGwqv7bAAAAAElFTkSuQmCC
</icon>

</service-task-definition>
