<?xml version="1.0" encoding="UTF-8"?><service-task-definition>

<label>Converter (TextFile to String)</label>
<label locale="ja">コンバータ (Textファイル to 文字列)</label>

<help-page-url>https://support.questetra.com/addons/converter-textfile-to-string/</help-page-url>
<help-page-url locale="ja">https://support.questetra.com/ja/addons/converter-textfile-to-string/</help-page-url>

<summary>Converts the text file to a string. All lines of the file are extracted and stored in string type data. Overwrites the values in a string type data item.</summary>
<summary locale="ja">テキストファイルを文字列に変換します。ファイルの全行が抽出され、文字列型データに格納されます。文字列型データを上書きします。</summary>

<license>(C) Questetra, Inc. (MIT License)</license>

<last-modified>2019-11-02</last-modified>

<configs>
  <config name="File_DataId" required="true" form-type="SELECT" select-data-type="FILE">
    <label>A: Select Text FILES DATA (Multiple not supported)</label>
    <label locale="ja">A: テキストファイルが格納されているファイル型データを選択してください（複数添付はサポート外）</label>
  </config>
  <config name="String_DataId" required="true" form-type="SELECT" select-data-type="STRING_TEXTAREA">
    <label>B: Select STRING DATA for Text (update)</label>
    <label locale="ja">B: テキスト情報が格納される文字列型データを選択してください (更新)</label>
  </config>
</configs>

<engine-type>1</engine-type>

<script><![CDATA[
// (c) 2018, Questetra, Inc. (the MIT License)

//////// START "main()" ////////
main();
function main(){ 

//// == Config Retrieving / 工程コンフィグの参照 ==
let textFileDataNum = configs.get( "File_DataId" ) + "";
let stringDataNum = configs.get( "String_DataId" ) + "";
// 'java.lang.String' (String Obj) to javascript primitive 'string'


//// == Data Retrieving / ワークフローデータの参照 ==
let myFiles = engine.findDataByNumber( textFileDataNum ); 
// java.util.ArrayList

// ファイル型データに複数添付されている場合、エラー
if (myFiles !== null && myFiles.size() > 1) {
  throw new Error( 'Attachment of multiple files can not be supported.' );
}


//// == Calculating / 演算 ==

let myFileText = '';
// ファイル型データにファイルが1つ添付されている場合
if (myFiles !== null) {
  fileRepository.readFile(myFiles.get(0), "UTF-8", function(line) {
      myFileText += line + '\n';
  });
}
// com.questetra.bpms.core.event.scripttask.FileRepositoryWrapper


//// == Data Updating / ワークフローデータへの代入 ==
if( stringDataNum !== "" ){
  // ファイル型データ項目にファイルが1つ添付されている場合はその値、1つも添付されていない場合は空をセット
  engine.setDataByNumber( stringDataNum, myFileText );
}
} //////// END "main()" ////////

]]></script>


<icon>
iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACx0lEQVRYR8WXz0sUYRjHP5O0CLX+
uHTIQ7sHIby0BdIh0EU6hwmd20Vx9mb9AUvlQQSRVhBq0WW3gxcFKzx4000kBKO2QNgSssgS6uDu
oQQJJt4ZZ3ecH+s4O+kLyy7s+z7fz/PM87zPMxKnvKRj6afpBbpRiCDRAkQOzhdQKCEhvvMkeOnW
7tEAWVrYZwi4B6qom1UCUgSYII747bhqAzwhxhkeH0PYLCTE48i8cCJwBnhKCkn13I+VQua+nSF7
gDQ54K4fyhUbCjkSxM02rQD+en5YT2GChJpLlXUYQHvmWV89txq7bcyJKoCW7Vt1JJxb7hIBwnp1
VAHSPAQeuLVSa99U1xTzW/Msflt02vYIWdXDCCBKptkPgI07GzQFmhhcGXSCKCHTWgXQbrjnRvGe
iz20nWvzxJO8lqS9uZ3t39u1INRc0CJgk/nCi47WDk8AxkOOEAcVoQGkyat3vGH5BbD3d4/RwijD
b4fNzrxCJqoDfAEuGXdMd03TeaHTUwRC50NqDgjx8Q/jJN8k7ewUkLmqAyielBwOieiFg+Fa4tpJ
GelIgODZIJnuDDt/dhh67a41rN5aZfnHspPnVWwDgOURiF1CPBvN0hvqJfcxx8DKgH+BUnhPgohj
EhrFG6QG1n6usVne9ASw9H2J3CfR3w4tQxLalOHszVn6wn0I8XpXppixRs9UhpaLaPLGJP2X+2ls
aKxXH1sAMFxE2l1guYqNEHOf51j4uuAJplgqsv5r3Xi2jKyNd0c2Ix1iZnPGzyS0aUZaOxbVYGlI
Y9fH2N3fZeTdiKcImA6VCRCytmOx61QHEh3zf45kUAm9LndyQyk8QyZmfoYnNZZbPK8dAf1fbVAR
V5jXSakMxLy9mOgQWnWIUVp83IIIYfFqlqrv1cz8wEREFKJIRFBoQeKKukU0FokSCgUk8rU8dp8D
flS8Cxv/AFp57iGwqv7bAAAAAElFTkSuQmCC
</icon>

</service-task-definition>
